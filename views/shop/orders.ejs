<%- include('../includes/head.ejs') %>
    <link rel="stylesheet" href="/css/product.css">
    <link rel="stylesheet" href="/css/orders.css">

</head>
<body>
    <%- include('../includes/navigation.ejs') %>
    <!-- <div class="flex-wrapper"> -->
    <main>
        <h1>Your Orders</h1>
        <% if (orders.length<=0) { %>
            <div style="height: 50vh;margin-top: 4rem;">
                <h1>Nothing here!</h1>
            </div>
            
        <% } else { %>
            <ul class="orders">
                <% orders.forEach(order => { %>
                    <li class="orders__item">
                        <h1># <%= order._id %></h1>
                        <ul class="orders__products">
                            <% order.products.forEach(p => { %>
                                <div class="orders__products-item">
                                    <div class="product-image">
                                        <img src="/<%= p.product.imageUrl %>">
                                    </div>
                                    <div class="product-details">
                                        <li><b><%= p.product.title %></b></li>
                                        <li>Quantity: <%= p.quantity %></li>
                                        <hr>
                                        <a href="/products/<%= p.product._id %>" class="product-btn">Buy again</a>
                                        
                                    </div>
                                    
                                </div>
                            <% }); %>
                        </ul>
                        <a class="invoice-btn" href="/orders/<%= order._id %>">Generate Invoice</a> 
                    </li>
                    
                <% }); %>
            </ul>
        <% } %>
    </main>
<!-- </div> -->
<%- include('../includes/end.ejs') %>
