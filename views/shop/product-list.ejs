<%- include('../includes/head.ejs') %>
    <link rel="stylesheet" href="/css/product.css">

</head>
<body>
    <%- include('../includes/navigation.ejs') %>
   
	<div style="margin-top:100px"></div>
    <!--================Category Product Area =================-->
	<section class="cat_product_area section_gap">
		<div class="container-fluid">
			<div class="row flex-row-reverse">
				<div class="col-lg-9">
					<div class="product_top_bar">
						<div class="left_dorp">
							<select class="sorting">
								<option value="1">Default sorting</option>
								<option value="2">Default sorting 01</option>
								<option value="4">Default sorting 02</option>
							</select>
							<select class="show">
								<option value="1">Show 12</option>
								<option value="2">Show 14</option>
								<option value="4">Show 16</option>
							</select>
                        </div>
                        
						<div class="right_page ml-auto">
							<nav class="cat_page" aria-label="Page navigation example">
                                <%- include('../includes/pagination.ejs'),{current:current,nextPage:nextPage,PreviousPage:PreviousPage,hasPreviousPage:hasPreviousPage,hasNextPage:hasNextPage,lastPage:lastPage} %>
							
							</nav>
						</div>
					</div>
					<% if(tagFilter) { %>
						<% if (prods.length > 0) { %>
							<div class="latest_product_inner row">
								<% for (let product of prods) { %>
								<div class="col-lg-3 col-md-6 col-sm-6">
									<div class="f_p_item">
											<div class="f_p_img">
												<a href="/products/<%= product._id %>">
												<img class="card__image img-fluid" src="/<%= product.imageUrl %>" alt="<%= product.title %>"></a>
												<div class="p_icon">
													<a href="#">
														<i class="lnr lnr-heart"></i>
													</a>
													<% if (userIsLoggedIn) { %>
														<%- include('../includes/add-to-cart.ejs',{prod:product}) %>
													<% } %>
												</div>
											</div>
									
										<a href="/products/<%= product._id %>">
											<h4><%= product.title %></h4>
										</a>
										<h5>₹<%= product.price %></h5>
									</div>
								</div>
								<% } %>
							</div>
							<% } else { %>
								<div class="latest_product_inner row">
								<h1>Products not found</h1>
								</div>
							<% } %>
					<% } else { %>
						<% if (prods.length > 0) { %>
						<div class="latest_product_inner row">
							<% for (let product of prods) { %>
							<div class="col-lg-3 col-md-3 col-sm-6">
								<div class="f_p_item">
										<div class="f_p_img">
											<a href="/products/<%= product._id %>">
											<img class="card__image img-fluid" src="/<%= product.imageUrl %>" alt="<%= product.title %>"></a>
											<div class="p_icon">
												<a href="#">
													<i class="lnr lnr-heart"></i>
												</a>
												<% if (userIsLoggedIn) { %>
													<%- include('../includes/add-to-cart.ejs',{prod:product}) %>
												<% } %>
											</div>
										</div>
								
									<a href="/products/<%= product._id %>">
										<h4><%= product.title %></h4>
									</a>
									<h5>₹<%= product.price %></h5>
								</div>
							</div>
							<% } %>
						</div>
						<% } else { %>
							<div class="latest_product_inner row">
							<h1>Products not found</h1>
							</div>
						<% } %>
					<% } %>
				</div>
				<div class="col-lg-3">
					<div class="left_sidebar_area">
						<aside class="left_widgets cat_widgets">
                            <div class="widgets_inner">
                                <div class="input-group d-flex flex-row">
                                    <input name="SEARCH" placeholder="Search products.." onfocus="this.placeholder = ''" onblur="this.placeholder = 'Search products.. '"
                                    required="" type="text">
                                    <button class="btn sub-btn">
                                        <span class="lnr lnr-arrow-right"></span>
                                    </button>
                                </div>
                                <div class="mt-10 info"></div>
							</div>
							<% if (totalGenres.length > 0) { %>
							<div class="l_w_title">
								<h3>Browse Categories</h3>
							</div>
							<div class="widgets_inner">
								
								<ul class="list">
									<% for (let genre of totalGenres) { %>
									<li>
										<a class="<%= tagFilter === genre.tag ? 'active' : '' %>" href="/products/tags/<%= genre.tag %>"><%= genre.tag %></a>
									</li>
									<% } %>
									<li>
										<a href="/book-genres">See more...</a>
									</li>
				
								</ul>
								
								
							</div>
							<% } %>
							<% if (authors.length > 0) { %>
							<div class="l_w_title">
								<h3>Browse Authors</h3>
							</div>
							<div class="widgets_inner">
								<ul class="list">
									<% for (let auth of authors) { %>
									<li>
										<a href="/authors/<%= auth._id %>"><%= auth.name %></a>
									</li>
									<% } %>
									<li>
										<a href="/authors">See more...</a>
									</li>
								</ul>
							</div>
							<% } %>
						</aside>
						<aside class="left_widgets p_filter_widgets">
							<div class="l_w_title">
								<h3>Product Filters</h3>
							</div>
							<div class="widgets_inner">
								<h4>Format</h4>
								<ul class="list">
									<li>
										<a href="#">Audio CD</a>
									</li>
									<li>
										<a href="#">Audiobook</a>
									</li>
									<li class="active">
										<a href="#">Hardcover</a>
									</li>
									<li>
										<a href="#">Paperback</a>
									</li>
								</ul>
							</div>
							<!-- <div class="widgets_inner">
								<h4>Color</h4>
								<ul class="list">
									<li>
										<a href="#">Black</a>
									</li>
									<li>
										<a href="#">Black Leather</a>
									</li>
									<li class="active">
										<a href="#">Black with red</a>
									</li>
									<li>
										<a href="#">Gold</a>
									</li>
									<li>
										<a href="#">Spacegrey</a>
									</li>
								</ul>
							</div> -->
							<div class="widgets_inner">
								<h4>Price</h4>
								<div class="range_item">
									<div id="slider-range"></div>
									<div class="row m0">
										<label for="amount">Price : </label>
										<input type="text" id="amount" readonly>
									</div>
								</div>
							</div>
						</aside>
					</div>
				</div>
			</div>

			<div class="row">
				<nav class="cat_page mx-auto" aria-label="Page navigation example">
					<ul class="pagination">
						<li class="page-item">
							<a class="page-link" href="#">
								<i class="fa fa-chevron-left" aria-hidden="true"></i>
							</a>
						</li>
						<li class="page-item active">
							<a class="page-link" href="#">01</a>
						</li>
						<li class="page-item">
							<a class="page-link" href="#">02</a>
						</li>
						<li class="page-item">
							<a class="page-link" href="#">03</a>
						</li>
						<li class="page-item blank">
							<a class="page-link" href="#">...</a>
						</li>
						<li class="page-item">
							<a class="page-link" href="#">09</a>
						</li>
						<li class="page-item">
							<a class="page-link" href="#">
								<i class="fa fa-chevron-right" aria-hidden="true"></i>
							</a>
						</li>
					</ul>
				</nav>
			</div>
		</div>
	</section>
	<!--================End Category Product Area =================-->
<%- include('../includes/end.ejs') %>
